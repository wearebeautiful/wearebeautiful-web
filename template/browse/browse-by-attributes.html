{%- extends 'base.html' -%}
{%- block content -%}
  <div class="row">
    <div class="col">
    </div>
    <div class="col-11 text-div">
      <h2>Browse by history</h2>
      <p>
         To view the models that have the following attributes, select one or 
         more of the buttons below to show the models:
      </p>

      <div class="card" id="buttons">
        <ul class="list-group list-group-flush">
          <li class="list-group-item">
            <p><a href="#" class="badge badge-primary">history</a></p>
            {% for event in events %}
              <a href="#" id="e-{{ loop.index0 }}" class="btn btn-outline-primary btn-sm browse-btn">{{ event }}</a>
            {% endfor %}
          </li>
          <li class="list-group-item">
            <p><a href="#" class="badge badge-secondary">tags</a></p>
            {% for tag in tags %}
              <a href="#" id="t-{{ loop.index0 }}" class="btn btn-outline-secondary btn-sm browse-btn">{{ tag }}</a>
            {% endfor %}
          </li>
          <li class="list-group-item">
            <p><a href="#" class="badge badge-info">info</a></p>
            {% for i in info %}
              <a href="#" id="i-{{ loop.index0 }}" class="btn btn-outline-info btn-sm browse-btn">{{ i }}</a>
            {% endfor %}
          </li>
        </ul>
      </div>
      <div style="font-size: 20pt; margin-top: 2rem;" class="text-center">
         This browse method not fully implemented yet!
      </div>
    </div>
    <div class="col">
    </div>
  </div>
{% endblock%}
{% block scripts %}
<script>

    var models = JSON.parse({{ models |tojson }});
    var info_list = JSON.parse({{ info_list |tojson }});
    var tags_list = JSON.parse({{ tags_list |tojson }});
    var events_list = JSON.parse({{ events_list |tojson }});
    var model_list = [];

    $('#buttons a').on('click', clicked);

    function clicked(event) {
        id = event.currentTarget.id
        type = id[0]
        index = parseInt(id.substr(2))
        if (type == 'e') {
            add = $("#" + id).hasClass("btn-outline-primary");
            $("#" + id).toggleClass("btn-outline-primary");
            $("#" + id).toggleClass("btn-primary");
            update_model_list(events_list[index][1], add)
        } 
        else  
        if (type == 't') {
            add = $("#" + id).hasClass("btn-outline-secondary");
            $("#" + id).toggleClass("btn-outline-secondary");
            $("#" + id).toggleClass("btn-secondary");
            update_model_list(tags_list[index][1], add)
        } 
        else  
        if (type == 'i') {
            add = $("#" + id).hasClass("btn-outline-info");
            $("#" + id).toggleClass("btn-outline-info");
            $("#" + id).toggleClass("btn-info");
            update_model_list(info_list[index][1], add)
        } 
    }

    function update_model_list(models, add) {
    }

</script>
{% endblock %}
